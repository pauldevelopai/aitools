# =============================================================================
# Environment Configuration
# =============================================================================
# Environment: dev, staging, or prod
ENV=dev

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://grounded:changeme@localhost:5432/grounded

# For Docker deployments (optional):
# POSTGRES_USER=grounded
# POSTGRES_PASSWORD=changeme
# POSTGRES_DB=grounded

# =============================================================================
# Security Settings
# =============================================================================
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
# REQUIRED in production, auto-generated in dev
SECRET_KEY=your-secret-key-here-min-32-chars

# CSRF Protection (auto-generated if not provided)
# CSRF_SECRET_KEY=your-csrf-secret-here

# Session Configuration
SESSION_COOKIE_NAME=session
SESSION_MAX_AGE=2592000  # 30 days in seconds

# Cookie Security (auto-configured based on ENV)
# COOKIE_SECURE=true  # Forced true in production
# COOKIE_HTTPONLY=true
# COOKIE_SAMESITE=lax

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_AUTH_REQUESTS=5  # Max requests per window
RATE_LIMIT_AUTH_WINDOW=60   # Window in seconds
RATE_LIMIT_RAG_REQUESTS=20
RATE_LIMIT_RAG_WINDOW=60

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json  # Options: json (production), text (dev)
# LOG_FILE=/var/log/grounded/app.log  # Optional file logging

# =============================================================================
# Embedding Provider Configuration
# =============================================================================
# Options: "openai" (production) or "local_stub" (testing only)
EMBEDDING_PROVIDER=openai

# OpenAI Settings (required if EMBEDDING_PROVIDER=openai)
OPENAI_API_KEY=sk-your-api-key-here
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# =============================================================================
# RAG Configuration
# =============================================================================
RAG_TOP_K=5                      # Number of chunks to retrieve
RAG_SIMILARITY_THRESHOLD=0.7     # Minimum similarity score (0-1)
RAG_MAX_CONTEXT_LENGTH=4000      # Max characters for context

# =============================================================================
# OpenAI Chat Configuration
# =============================================================================
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_CHAT_TEMPERATURE=0.1

# =============================================================================
# Admin Configuration
# =============================================================================
# WARNING: Only use in dev/staging. Do NOT set in production.
# In production, create admin users through proper channels.
ADMIN_PASSWORD=admin123

# =============================================================================
# Discovery Pipeline Configuration
# =============================================================================
# Enable/disable the automated discovery pipeline
DISCOVERY_ENABLED=true

# API key for authenticating cron jobs (generate with secrets.token_urlsafe(32))
# DISCOVERY_API_KEY=your-discovery-api-key-here

# GitHub Configuration (for higher rate limits)
# Get token from: https://github.com/settings/tokens
# GITHUB_TOKEN=ghp_your_github_token_here
GITHUB_MIN_STARS=100

# Product Hunt API Configuration
# Get credentials from: https://api.producthunt.com/v2/docs
# PRODUCTHUNT_API_KEY=your-producthunt-client-id
# PRODUCTHUNT_API_SECRET=your-producthunt-client-secret

# Rate limit delay between requests (seconds)
DISCOVERY_RATE_LIMIT_DELAY=2.0
